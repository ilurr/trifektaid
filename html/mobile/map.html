<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width">
	<meta name="description" content="">
	<meta name="keywords" content="">

	<!-- url bar color theme -->
	<meta name="theme-color" content="#fff">
	<meta name="msapplication-navbutton-color" content="#fff">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="theme-color" content="#fff">
	<meta name="msapplication-navbutton-color" content="#fff">
	<meta name="apple-mobile-web-app-status-bar-style" content="#fff">

	<!-- icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="../asset/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../asset/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../asset/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="../asset/images/favicon/site.webmanifest">

    <title>Trifekta</title>
    
	<!-- font -->
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
	

    <link href="../asset/css/style-m.css" rel="stylesheet" type="text/css">


</head>

<body>
	<!-- s: root -->
	<div class="root">

		<!-- header -->
		<header class="header -mobile -fixed">
			<div class="header-col">
				<div class="logo">
					<a href="index.html">
						<img src="../asset/images/logo-trifekta-mobile.svg" alt="Trifekta">
					</a>
				</div>
			</div>
			<div class="header-col -right">
				<!-- menu -->
				<div class="menu-header">
					<div class="menu-header-col">
						<a class="button menu-button" href="javascript:void(0)" role="button" data-toggle="search">
							<span class="icon-general icon-search"></span>
						</a>
						<a class="button menu-button" href="notification.html" role="link">
							<span class="nav-badge">5</span>
							<svg class="icon-nav icon-bell" title="icon-bell">
								<use xlink:href="../asset/images/icon/icon.svg#icon-bell" />
							</svg>
						</a>
					</div>
				</div>
			</div>
		
			<!-- search -->
			<div id="searchBar" class="search-header">
				<div class="search-bg"></div>
				<form action="search.html">
					<input type="text" class="input" name="search" placeholder="Search">
					<input type="submit" class="button" name="search-btn" value="Search">
					<span class="icon-general icon-search"></span>
				</form>
			</div>
		</header>
		
		<!-- grid -->
		<div class="grid">

			<div class="grid-flex">

				<div class="grid-col -nav">
					<!-- nav main -->
					<nav class="nav -fixed" aria-label="Main Navigation">
						<ol class="nav-wrap">
							<li class="nav-item">
								<a href="index.html" class="nav-link" role="link" aria-label="Home">
									<div class="nav-flex">
										<div class="nav-icon">
											<svg class="icon-nav icon-home" title="icon-home">
												<use xlink:href="../asset/images/icon/icon.svg#icon-home" />
											</svg>
										</div>
										<div class="nav-text">Home</div>
									</div>
								</a>
							</li>
							<li class="nav-item">
								<a href="map.html" class="nav-link -active" role="link" aria-label="Map">
									<div class="nav-flex">
										<div class="nav-icon">
											<svg class="icon-nav icon-map" title="icon-map">
												<use xlink:href="../asset/images/icon/icon.svg#icon-map" />
											</svg>
										</div>
										<div class="nav-text">Map</div>
									</div>
								</a>
							</li>
							<li class="nav-item">
								<a href="discover.html" class="nav-link" role="link" aria-label="Discover">
									<div class="nav-flex">
										<div class="nav-icon">
											<svg class="icon-nav icon-trifekta" title="icon-trifekta">
												<use xlink:href="../asset/images/icon/icon.svg#icon-trifekta" />
											</svg>
										</div>
										<div class="nav-text">Discover</div>
									</div>
								</a>
							</li>
							<li class="nav-item">
								<a href="challenges.html" class="nav-link" role="link" aria-label="Challenges">
									<div class="nav-flex">
										<div class="nav-icon">
											<span class="nav-badge"></span>
											<svg class="icon-nav icon-trophy" title="icon-trophy">
												<use xlink:href="../asset/images/icon/icon.svg#icon-trophy" />
											</svg>
										</div>
										<div class="nav-text">Challenges</div>
									</div>
								</a>
							</li>
							<li class="nav-item">
								<a href="profile.html" class="nav-link" role="link" aria-label="Profile">
									<div class="nav-flex">
										<div class="nav-icon">
											<span class="nav-badge"></span>
											<svg class="icon-nav icon-user" title="icon-user">
												<use xlink:href="../asset/images/icon/icon.svg#icon-user" />
											</svg>
										</div>
										<div class="nav-text">Profile</div>
									</div>
								</a>
							</li>
						</ol>
					</nav>
				</div>

				<div class="grid-col -wide">

					<h1 class="title-section">
						Map
					</h1>

					<!-- map -->
					<div class="map box">
						<div class="map-block" id="jsMaps"></div>
					</div>

					<!-- map box hover -->
					<div id="mapOverlay" class="map-overlay" data-overlay="true" aria-hidden="true">
						<div class="map-box-google">
							<div class="map-title">Istiqlal Mosque</div>
							<div class="map-rating">
								<div class="icon-rating">
									<div class="icon-general icon-star" data-rating="3.7"></div>
									<div class="icon-general icon-star-bg"></div>
								</div>
							</div>
							<div class="map-nearby">1.3 Km nearby</div>
							<div class="map-row">
								<div class="map-img">
									<span><img src="https://source.unsplash.com/3qPQtPoyqUg/500x333"></span>
								</div>
								<div class="map-col">
									<div class="map-lead">This mosque features a contemporary design & is the largest in Southeast Asia.</div>
									<a href="map-place-detail.html" class="button -primary">Explore</a>
								</div>
							</div>
						</div>
					</div>

					<!-- map detail modal -->

					<!-- place whos been here modal -->

				</div>

			</div>

		</div>

		<!-- notify message -->
		<div id="success-msg" class="panel-alert -fixed -success">
			<p>Yeay! You were successful.</p>
		</div>
		<div id="error-msg" class="panel-alert -fixed -error">
			<p>Failed, there was a problem, try again later.</p>
		</div>

		<!-- modal apps -->
		<div id="modalApps" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="onlyApss" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span class="icon-close" aria-hidden="true"></span></button>
					<div class="modal-header">
						<h5 class="modal-title" id="onlyApss">Only on Mobile App</h5>
					</div>
					<div class="modal-body">
						<div class="app-modal">
							<div class="app-modal-text">
								Only available on mobile app. <br>Download it now on the <a href="#" target="_blank">Google Play</a> or <a href="#" target="_blank">Apple App Store</a>.
							</div>
							<div class="app-badge">
								<a href="#" target="_blank">
									<img src="../asset/images/google-play-badge.png" alt="Get it on Google Play">
								</a>
								<a href="#" target="_blank">
									<img src="../asset/images/app-store-badge.png" alt="Download on the App Store">
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
	<!-- e: root -->

<script type="text/javascript" src="../asset/js/jquery.min.js"></script>
<script type="text/javascript" src="../asset/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../asset/js/plugin-pack.min.js"></script>
<script type="text/javascript" src="../asset/js/main-m.js"></script>
<script type="text/javascript" src="../asset/js/svgxuse.min.js" defer></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCJHXsHMriUDEQKsw5F6BNkNlGy572LhFw&callback=initMap&libraries=&v=weekly" defer ></script>
<script>
// Create the script tag, set the appropriate attributes


// Attach your callback function to the `window` object
window.initMap = function() {
  // JS API is loaded and available
        // Create a <script> tag and set the USGS URL as the source.
        var script = document.createElement('script');
        // This example uses a local copy of the GeoJSON stored at
        script.src = '../asset/js/dummy-place.js';
        document.getElementsByTagName('head')[0].appendChild(script);

	var pos = {lat: -6.176523, lng: 106.825093};
  var bounds = new google.maps.LatLngBounds();

	map = new google.maps.Map(document.getElementById('jsMaps'), {
		center: {lat: -6.1760114, lng: 106.8260832},
		zoom: 16
	});

      let infowindow = new google.maps.InfoWindow();

function HTMLMarker(place) {
    var lat = place.lat;
    var lng = place.lng;
    this.id = place.id;
    this.title = place.title;
    this.img = place.img;
    this.lead = place.lead;
    this.pos = new google.maps.LatLng( lat, lng );
			//console.log(this.pos)
}

HTMLMarker.prototype = new google.maps.OverlayView();

HTMLMarker.prototype.onRemove = function () {};

HTMLMarker.prototype.onAdd = function () {
    var div = this.div = document.createElement('DIV');
    div.className = "map-marker";
    div.id = this.id;
    div.innerHTML = '<a href="#" class="map-link" data-name="' + this.title + '"><div class="map-thumb"><img src="' + this.img + '"></div></a>';
	//div.innerHTML += '<div class="map-box-google -popup"><div class="map-title">' + this.title + '</div><div class="map-rating"><div class="icon-rating"><div class="icon-general icon-star" data-rating="4.5"></div><div class="icon-general icon-star-bg"></div></div></div><div class="map-nearby">1.3 Km nearby</div><div class="map-row"><div class="map-img"><span><img src="' + this.img + '"></span></div><div class="map-col"><div class="map-lead">' + this.lead + '</div><a href="#" class="button -map">Explore</a></div></div></div>';

    var panes = this.getPanes();
    panes.overlayMouseTarget.appendChild(div);

	var me = this;
	google.maps.event.addDomListener(me, 'click', function() {
		//infowindow.open(map, me);
		//infowindow.setContent('klok')
		console.log(this);
	});
	google.maps.event.addDomListener(div, 'click', function() {
		google.maps.event.trigger(me, 'click');
	});

};

HTMLMarker.prototype.draw = function () {
    var overlayProjection = this.getProjection();
    var position = overlayProjection.fromLatLngToDivPixel(this.pos);
    var panes = this.getPanes();
    this.div.style.left = position.x + 'px';
    this.div.style.top = position.y + 'px';
};

      window.eqfeed_callback = function(results) {
        for (var i = 0; i < results.place.length; i++) {
          var latLng = new google.maps.LatLng(results.place[i].lat,results.place[i].lng);
          //var marker = new google.maps.Marker({
          //  position: latLng,
          //  map: map
          //});
			addMarker(results.place[i]);
				//console.log(results.place[i])

		  bounds.extend(latLng);
        }
		    function addMarker(place) {
				var htmlMarker = new HTMLMarker(place);
				htmlMarker.setMap(map);
				//console.log(htmlMarker.setMap(map))
			}

		  map.fitBounds(bounds);
      }

  
    
    //to use it

};

// Append the 'script' element to 'head'



</script><script>

	// buat contoh aja, asumsi muncul pas di klik buletan, 
	let kl = document.getElementById('mapOverlay');
	if(!!kl) {
		setTimeout(function(){

			// open
			openOverlay(kl);

			// close
			// closeOverlay(kl);
			
		}, 2500);
	}
</script>
</body>
</html>
